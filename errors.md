# Коды ошибок и исключения

## Общие ошибки

| HTTP код | Описание |
|----------|----------|
| 200 | Успешный запрос |
| 400 | Ошибка валидации параметров |
| 500 | Внутренняя ошибка сервера |

## Ошибки аутентификации

| Ошибка | Решение |
|--------|---------|
| `Параметры account и client обязательны` | Добавьте параметры account и client в URL |
| `Ошибка авторизации в Яндекс.Директ` | Проверьте корректность учетных данных |
| `У вас нет доступа к данному аккаунту` | Получите доступ через интерфейс Яндекс.Директ |
| `Invalid token` | Обновите токен доступа |

## Ошибки валидации параметров

| Ошибка | Описание | Решение |
|--------|----------|---------|
| `Параметр campaign_ids обязателен` | Не указаны ID кампаний | Добавьте параметр campaign_ids |
| `Параметр group_ids обязателен` | Не указаны ID групп объявлений | Добавьте параметр group_ids |
| `Параметр fields обязателен` | Не указаны поля для получения | Добавьте параметр fields |
| `Параметры from и to обязательны` | Не указаны даты периода | Добавьте параметры from и to |
| `Параметр aggregator обязателен` | Не указан тип группировки | Добавьте параметр aggregator |
| `Параметр aggregator должен быть одним из: Date, Week, Month, Quarter, Year` | Неверное значение aggregator | Используйте одно из допустимых значений |

## Ошибки целей и расчетов

| Ошибка | Описание | Решение |
|--------|----------|---------|
| `Для расчета CPA необходимо указать online_goals` | Запрошен CPA без онлайн целей | Добавьте параметр online_goals |
| `Для расчета CPL необходимо указать offline_goals` | Запрошен CPL без оффлайн целей | Добавьте параметр offline_goals |
| `Goal not found` | Цель не найдена | Проверьте ID цели в Яндекс.Метрике |

## Ошибки процессов

| Ошибка | Описание | Решение |
|--------|----------|---------|
| `Не указан параметр processId` | Отсутствует ID процесса | Добавьте параметр processId |
| `Процесс с ID ... не найден` | Процесс не существует или был удален | Проверьте ID процесса |
| `Процесс еще не завершен или завершен с ошибкой` | Результаты недоступны | Дождитесь завершения процесса |
| `Результаты процесса не найдены` | Данные не сохранены | Переезагрузите результаты |
| `Процесс не выполняется` | Процесс уже завершен или остановлен | Запустите новый процесс |

## Ошибки API Яндекс.Директ

| Ошибка | Описание | Решение |
|--------|----------|---------|
| `API quota exceeded` | Превышен лимит запросов | Подождите или обратитесь в поддержку |
| `Campaign not found` | Кампания не найдена | Проверьте ID кампании |
| `Invalid campaign ID` | Неверный формат ID кампании | Используйте корректный числовой ID |

## Обработка ошибок в коде

### Пример на Python

```python
import requests

try:
    response = requests.get(
        'https://your-domain.com/webHooks/getCampaignsList',
        params={
            'account': 'myaccount',
            'client': 'myclient',
            'from': '2026-01-01',
            'to': '2026-01-20'
        }
    )
    
    data = response.json()
    
    if data.get('status') == 'error':
        print(f"Ошибка: {data.get('error')}")
    else:
        print("Успешно:", data)
        
except requests.exceptions.RequestException as e:
    print(f"Ошибка сети: {e}")
except Exception as e:
    print(f"Неизвестная ошибка: {e}")
```

## Статус коды HTTP

| Код | Описание |
|-----|----------|
| 200 OK | Запрос выполнен успешно |
| 400 Bad Request | Некорректные параметры запроса |
| 401 Unauthorized | Ошибка аутентификации |
| 403 Forbidden | Доступ запрещен |
| 404 Not Found | Ресурс не найден |
| 500 Internal Server Error | Ошибка сервера |
| 503 Service Unavailable | Сервис недоступен |
